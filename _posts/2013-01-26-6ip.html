---
layout: post
title: "编程随想 | 如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网IP"
date: '2013-01-26T12:12:00.001+08:00'
author: Wenh Q
tags:
- linux
modified_time: '2013-09-30T15:00:06.670+08:00'
thumbnail: http://lh4.googleusercontent.com/Ky0rYvcL-GXMW1VIFzPg_GGKs0IWNtfiuzkYUvLEzdFNCodugIfE-BiN9FW7AYYUrtKbugWlVrQs6aI7Y3eJVNP61MRsaBjthXAxhPDQXajAMWlWa6LguRZ-kBY=s72-c
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-43854672212155383
blogger_orig_url: http://binaryware.blogspot.com/2013/01/6ip.html
---

<a href="http://feedproxy.google.com/~r/chinagfwblog/~3/maKr8cnJiDo/">编程随想 | 如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网IP</a>: <br />在多位读者的强烈要求下，本文终于隆重推出了 :) 今天俺来介绍一下：如何利用操作系统虚拟机（以下简称”虚拟机”）来隐匿自己的公网IP。<br /><h2>★准备工作</h2>为了给本文打基础，俺在最近两个月特地写了一个《扫盲操作系统虚拟机》的系列博文（链接在”<a href="http://program-think.blogspot.com/2012/10/system-vm-0.html" rel="nofollow">这里</a>“）。如果你不是 IT 技术人员，或者你对虚拟机了解不多，<b>强烈建议</b>你先把这个虚拟机扫盲系列看完，然后再来看本文。<br /><br />在本系列第一篇《<a href="http://program-think.blogspot.com/2010/04/howto-cover-your-tracks-1.html" rel="nofollow">网络方面的防范</a>》，俺专门解释了：”什么是公网IP”，也特别强调了公网IP暴露的危险性。如果你比较健忘的话，先去把那篇再复习一下。<br /><h2>★无代理的情形</h2>如果你上网不使用代理，那么你访问的网站就会看到你的公网 IP。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh4.googleusercontent.com/Ky0rYvcL-GXMW1VIFzPg_GGKs0IWNtfiuzkYUvLEzdFNCodugIfE-BiN9FW7AYYUrtKbugWlVrQs6aI7Y3eJVNP61MRsaBjthXAxhPDQXajAMWlWa6LguRZ-kBY" /><br /><h2>★普通代理的情形</h2>此处说的代理是广义的，包括VPN、多重代理、等。如果用了代理，你访问的网站看到的公网 IP 实际上是代理服务器的 IP。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh3.googleusercontent.com/lkZjGLE-sd3KUXrB-SeMUPX2jSl3QlY7byT6i8SwLVsQBq_yQp8YgaNNRDrG3rt48oaxqjLAtays9MByzYNtzp-iSzJ-UVGakaWovLe1AHQzo8H-ifPHjPVgrd8" /><br />但是不要高兴得太早，仅仅依靠普通的代理，是远远不够滴！请看下面的例子。<br /><h2>★Flash如何暴露你的公网IP？</h2>比如你在浏览器中设置了代理，那么浏览器确实会通过代理来加载网站的页面。<b>但是</b>，浏览器如果安装了某些插件（最典型的是 Flash），这些插件是可以做到绕过代理，直接去访问目标网站的。<br /><br />举个例子：<br /><br />比如你想在某个国内的网盘上传政治敏感文件。因为这个网盘是国产的，你担心网盘服务器会记录你的公网 IP。所以捏，你设置了浏览器的 HTTP 代理，通过翻墙代理来访问这个网盘的页面。<br /><br />如今的很多网盘是利用 Flash 插件进行文件上传的。而且 Flash 插件在上传文件的时候，往往是不经过浏览器的 HTTP 代理，<b>直接连接</b>网盘服务器。如此一来，你的公网 IP 还是暴露了 :(。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh3.googleusercontent.com/LPdbpOzwgT_7h9MHALQ-3e9-jfwlCodpNduHegMvOks1YMIbW1BV9P5k6hcT2Qy-p-oylRNxLi5ysTco4mSuVTmzVK9xTo69Mhm548bjwYH7GaS1j2BJugqjZ-4" /><br /><h2>★某些国产软件如何暴露你的公网IP？</h2>除了浏览器插件（以Flash为主）会暴露你的公网 IP，还有其它很多国产的网络软件也会暴露你的公网 IP。比较典型的有 QQ、腾讯浏览器、360浏览器、迅雷、等等。<br /><br />上述这些网络软件虽然都提供了代理的功能。<b>但是</b>，即使你设置了代理，这些软件依然有可能在后台，悄悄地访问自己公司的服务器，传输某些不可告人的信息。而且这些软件访问自家的服务器，往往是绕过代理设置，<b>直接连接</b>——这就会导致你的公网IP暴露。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh3.googleusercontent.com/7MASBpz1J59zvlSRizUzzm05eHvd7WyTtRonnqLkq_LTJhwNBYnq4c2PNnSQsVOSOiQPSEv05AVa17LRkRqFk-4JKFtpR22iorSc5esjENtmzP7TiM8p8XBhEKo" /><br /><h2>★单虚拟机的方案</h2>那么，如何避免上述这几种危险的情况捏？首先来看一下”单虚拟机”的方案。<br /><br />咱们可以把那些有危险的软件安装在虚拟系统（虚拟机A）内，然后把该虚拟唯一的虚拟网卡设置为 <b>Host-Only</b> 模式（关于网卡模式的设置，请看”<a href="http://program-think.blogspot.com/2012/12/system-vm-5.html" rel="nofollow">这里</a>“）。由于唯一的虚拟网卡是 <b>Host-Only</b> 模式，所以 虚拟机（Guest OS）内的任何软件都<b>不可能<span style="text-decoration: underline;">直接访问</span>外部网络</b>。<br /><br />那么，如何让这些危险的软件联网呢？你可以在 Host OS 里面安装一个代理软件。虽然这个 Guest OS 无法访问外网，但还是可以访问 Host OS 的，所以也就可以连接到 Host OS 里面的代理软件。然后你设置这些危险软件的 HTTP 代理或 SOCKS 代理，让它们通过代理连接到互联网。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh4.googleusercontent.com/mMOFO42Roq6rr1JcQ0Wo4UB96y-PlQYkbNQm3sqSYXfS2GB9Z_L7deTpRhwR5nknnuD3_r06TR0xNviXYcUCPaf2TJ12j28VOUyt_CKVYzr-vP-_asld7Ia113o" /><br /><h2>★双虚拟机的方案</h2>说完”单虚拟机方案”，再来说说”双虚拟机方案”。<br /><br />对很多网友而言，单虚拟机已经足够了。那么为啥俺还要介绍双虚拟机捏？主要有如下几方面考虑<br /><br />1、某些翻墙代理软件不是开源的，有些网友对这类软件不放心<br /><br />2、某些网友的 Host OS 不是 Windows，但是很多翻墙代理是 Windows 软件<br />所以，咱们可以在”单虚拟机”的基础上再扩展一下，把代理软件也放到虚拟机中（下图的虚拟机B）。虚拟机B 的网卡很有讲究滴——<b>必须是双网卡</b>。一个网卡设置为 Host-Only 模式，以便跟虚拟机 A对接；另一个网卡设置为 NAT 模式，以便访问外网。<br /><br />示意图如下<br /><br /><img alt="不见图 请翻墙" src="http://lh5.googleusercontent.com/EG-eA0wURF5rWkQGkl0Yq7lQjwaVkDoB1t_dSwTQf5GlDKdLcDrfBqzU1D2IrQ1dTAUcPqGLeL1369RDNijQ2jcEL6H40_dzehktsSfquNe6DmvO44U4PZF-kC0" /><br /><h2>★结合多重代理</h2>在本系列的前一篇，俺介绍了”<a href="http://program-think.blogspot.com/2012/03/howto-cover-your-tracks-5.html" rel="nofollow">用多重代理保持匿名</a>“。今天介绍的这2个招数都可以跟多重代理搭配<br /><br />打个比方，假设你用 “TOR+世界通” 来构造多重代理。对于单虚拟机的方案，你把 TOR 和世界通都安装到 Host OS 即可；对于双虚拟机的方案，你把 TOR 和世界通都安装到 虚拟机B 即可。<br /><a href="http://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html#index" rel="nofollow">回到本系列的目录</a><img alt="" height="1" src="http://feeds.feedburner.com/~r/programthink/~4/d6XwDgkl_iI" width="1" /><br /><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small><br /><a href="http://eepurl.com/msuvD" rel="nofollow">墙外新闻实时更新 欢迎订阅数字时代</a><br /><br /><br /><br /><br /><hr /><small>© Chinese Netizens for <a href="https://caonima.biz/chinese" rel="nofollow">中国数字时代</a>, 2013. |<br /><a href="https://caonima.biz/chinese/2013/01/%e7%bc%96%e7%a8%8b%e9%9a%8f%e6%83%b3-%e5%a6%82%e4%bd%95%e9%9a%90%e8%97%8f%e4%bd%a0%e7%9a%84%e8%b8%aa%e8%bf%b9%ef%bc%8c%e9%81%bf%e5%85%8d%e8%b7%a8%e7%9c%81%e8%bf%bd%e6%8d%956%ef%bc%9a%e7%94%a8/" rel="nofollow">Permalink</a> |<br /><a href="https://caonima.biz/chinese/2013/01/%e7%bc%96%e7%a8%8b%e9%9a%8f%e6%83%b3-%e5%a6%82%e4%bd%95%e9%9a%90%e8%97%8f%e4%bd%a0%e7%9a%84%e8%b8%aa%e8%bf%b9%ef%bc%8c%e9%81%bf%e5%85%8d%e8%b7%a8%e7%9c%81%e8%bf%bd%e6%8d%956%ef%bc%9a%e7%94%a8/#comments" rel="nofollow">No comment</a> |<br />Add to<br /><a href="http://del.icio.us/post?url=https://caonima.biz/chinese/2013/01/%e7%bc%96%e7%a8%8b%e9%9a%8f%e6%83%b3-%e5%a6%82%e4%bd%95%e9%9a%90%e8%97%8f%e4%bd%a0%e7%9a%84%e8%b8%aa%e8%bf%b9%ef%bc%8c%e9%81%bf%e5%85%8d%e8%b7%a8%e7%9c%81%e8%bf%bd%e6%8d%956%ef%bc%9a%e7%94%a8/&amp;title=%E7%BC%96%E7%A8%8B%E9%9A%8F%E6%83%B3%20%7C%20%E5%A6%82%E4%BD%95%E9%9A%90%E8%97%8F%E4%BD%A0%E7%9A%84%E8%B8%AA%E8%BF%B9%EF%BC%8C%E9%81%BF%E5%85%8D%E8%B7%A8%E7%9C%81%E8%BF%BD%E6%8D%95%5B6%5D%EF%BC%9A%E7%94%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9A%90%E5%8C%BF%E5%85%AC%E7%BD%91IP" rel="nofollow">del.icio.us</a><br /><br /><br />Post tags: <a href="https://caonima.biz/chinese/tag/%e5%85%ac%e5%85%b1%e7%9f%a5%e8%af%86%e5%88%86%e5%ad%90/?category=10466" rel="nofollow">公共知识分子</a>, <a href="https://caonima.biz/chinese/tag/%e8%b7%a8%e7%9c%81%e8%bf%bd%e6%8d%95/?category=10466" rel="nofollow">跨省追捕</a>, <a href="https://caonima.biz/chinese/tag/%e9%98%b2%e7%81%ab%e9%95%bf%e5%9f%8e/?category=10466" rel="nofollow">防火长城</a><br /><br />订靠谱新闻 获穿墙捷径 请发电邮(最好用gmail)至：sub@chinadigitaltimes.net<br /><br /></small><br /><div><a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:yIl2AUoC8zA"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:-BTjWOF_DHI"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?i=maKr8cnJiDo:nau-OgKyXt4:-BTjWOF_DHI" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:F7zBnMyn0Lo"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?i=maKr8cnJiDo:nau-OgKyXt4:F7zBnMyn0Lo" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:V_sGLiPBpWU"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?i=maKr8cnJiDo:nau-OgKyXt4:V_sGLiPBpWU" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:qj6IDK7rITs"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:l6gmwiTKsz0"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:gIN9vFwOqvQ"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?i=maKr8cnJiDo:nau-OgKyXt4:gIN9vFwOqvQ" /></a> <a href="http://feeds.feedburner.com/~ff/chinagfwblog?a=maKr8cnJiDo:nau-OgKyXt4:TzevzKxY174"><img border="0" src="http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174" /></a></div><img height="1" src="http://feeds.feedburner.com/~r/chinagfwblog/~4/maKr8cnJiDo" width="1" />