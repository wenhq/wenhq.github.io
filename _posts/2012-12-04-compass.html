---
layout: post
title: Compass用法指南
date: '2012-12-04T12:33:00.001+08:00'
author: Wenh Q
tags:
- F2E
modified_time: '2013-09-30T14:34:28.052+08:00'
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-7382143786026594809
blogger_orig_url: http://binaryware.blogspot.com/2012/12/compass.html
---

<a href="http://www.ruanyifeng.com/blog/2012/11/compass.html">Compass用法指南</a>: <br />几个月前，我介绍了<a href="http://www.ruanyifeng.com/blog/2012/06/sass.html">Sass</a>的用法。<br />Sass是一种"CSS预处理器"，可以让CSS的开发变得简单和可维护。但是，只有搭配<a href="http://compass-style.org/">Compass</a>，它才能显出真正的威力。<br /><br />本文介绍Compass的用法。毫不夸张地说，学会了Compass，你的CSS开发效率会上一个台阶。<br /><br /><img src="http://image.beekka.com/blog/201211/bg2012112902.png" /><br /><br />本文假设你已经掌握了CSS的主要用法，如果你还懂Sass，那就更好了。但是不懂Sass，一样可以阅读本文。<br /><br /><b>一、Compass是什么？</b><br /><br />简单说，Compass是Sass的工具库（toolkit）。<br /><br />Sass本身只是一个编译器，Compass在它的基础上，封装了一系列有用的模块和模板，补充Sass的功能。它们之间的关系，有点像Javascript和jQuery、Ruby和Rails、python和Django的关系。<br /><br /><b>二、安装</b><br /><br />Compass是用Ruby语言开发的，所以安装它之前，必须安装Ruby。<br /><br />假定你的机器（Linux或OS X）已经安装好Ruby，那么在命令行模式下键入：<br /><br /><blockquote><br />sudo gem install compass<br /><br /></blockquote><br />如果你用的是Windows系统，那么要省略前面的sudo。<br /><br />正常情况下，Compass（连同Sass）就安装好了。<br /><br /><b>三、项目初始化</b><br /><br />接下来，要创建一个你的Compass项目，假定它的名字叫做myproject，那么在命令行键入：<br /><br /><blockquote><br />compass create myproject<br /><br /></blockquote><br />当前目录中就会生成一个myproject子目录。<br /><br />进入该目录：<br /><br /><blockquote><br />cd myproject<br /><br /></blockquote><br />你会看到，里面有一个<a href="https://github.com/thesassway/sass-test/blob/master/config.rb">config.rb</a>文件，这是你的项目的<a href="http://compass-style.org/help/tutorials/configuration-reference/">配置文件</a>。还有两个子目录sass和stylesheets，前者存放Sass源文件，后者存放编译后的css文件。<br /><br /><img src="http://image.beekka.com/blog/201211/bg2012112901.png" /><br /><br />接下来，就可以动手写代码了。<br /><br /><b>四、编译</b><br /><br />在写代码之前，我们还要知道如何编译。因为我们写出来的是后缀名为scss的文件，只有编译成css文件，才能用在网站上。<br /><br />Compass的编译命令是<br /><br /><blockquote><br />compass compile<br /><br /></blockquote><br />该命令在项目根目录下运行，会将sass子目录中的scss文件，编译成css文件，保存在stylesheets子目录中。<br /><br />默认状态下，编译出来的css文件带有大量的注释。但是，生产环境需要压缩后的css文件，这时要使用--output-style参数。<br /><br /><blockquote><br />compass compile --output-style compressed<br /><br /></blockquote><br />Compass只编译发生变动的文件，如果你要重新编译未变动的文件，需要使用--force参数。<br /><br /><blockquote><br />compass compile --force<br /><br /></blockquote><br />除了一次性编译命令，compass还有自动编译命令<br /><br /><blockquote><br />compass watch<br /><br /></blockquote><br />运行该命令后，只要scss文件发生变化，就会被自动编译成css文件。<br /><br />更多的compass命令行用法，请参考<a href="http://compass-style.org/help/tutorials/production-css/">官方文档</a>。<br /><br /><b>五、Compass的模块</b><br /><br />Compass采用模块结构，不同模块提供不同的功能。目前，它内置五个模块：<br /><br /><blockquote><br />* reset<br /><br />* css3<br /><br />* layout<br /><br />* typography<br /><br />* utilities<br /><br /></blockquote><br />下面，我依次介绍这五个内置模块。它们提供Compass的主要功能，但是除了它们，你还可以自行加载网上的第三方模块，或者自己动手编写模块。<br /><br /><b>六、reset模块</b><br /><br />通常，编写自己的样式之前，有必要<a href="http://meyerweb.com/eric/tools/css/reset/">重置</a>浏览器的默认样式。<br /><br />写法是<br /><br /><blockquote><br />@import "compass/reset";<br /><br /></blockquote><br />上面的@import命令，用来指定加载模块，这里就是加载reset模块。编译后，会生成相应的<a href="http://meyerweb.com/eric/tools/css/reset/index.html">css reset代码</a>。<br /><br /><b>七、CSS3模块</b><br /><br />目前，<a href="http://compass-style.org/reference/compass/css3/">该模块</a>提供19种CSS3命令。在这里，我介绍其中的三种：圆角、透明和行内区块。<br /><br /><b>7.1 圆角</b><br /><br /><a href="http://compass-style.org/reference/compass/css3/border_radius/">圆角</a>（border-radius）的写法是<br /><br /><blockquote><br />@import "compass/css3";<br /><br />.rounded {<br /><br />@include border-radius(5px);<br /><br />}<br /><br /></blockquote><br />上面的@include命令，表示调用某个mixin（类似于C语言的宏），5px是参数，这里用来指定圆角的半径。<br /><br />编译后的代码为<br /><br /><blockquote><br />.rounded {<br /><br />-moz-border-radius: 5px;<br /><br />-webkit-border-radius: 5px;<br /><br />-o-border-radius: 5px;<br /><br />-ms-border-radius: 5px;<br /><br />-khtml-border-radius: 5px;<br /><br />border-radius: 5px;<br /><br />}<br /><br /></blockquote><br />如果只需要左上角为圆角，写法为<br /><br /><blockquote><br />@include border-corner-radius(top, left, 5px);<br /><br /></blockquote><br /><b>7.2 透明</b><br /><br /><a href="http://compass-style.org/reference/compass/css3/opacity/">透明</a>（opacity）的写法为<br /><br /><blockquote><br />@import "compass/css3";<br /><br />#opacity {<br /><br />@include opacity(0.5); <br /><br />}<br /><br /></blockquote><br />编译后生成<br /><br /><blockquote><br />#opacity {<br /><br />filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0.5);<br /><br />opacity: 0.5;<br /><br />}<br /><br /></blockquote><br />opacity的参数0.5，表示透明度为50%。<br /><br />完全透明的写法是<br /><br /><blockquote><br />@include opacity(0);<br /><br /></blockquote><br />完全不透明则是<br /><br /><blockquote><br />@include opacity(1);<br /><br /></blockquote><br /><b>7.3 行内区块</b><br /><br /><a href="http://compass-style.org/reference/compass/css3/inline_block/">行内区块</a>（inline-block）的写法为<br /><br /><blockquote><br />@import "compass/css3";<br /><br />#inline-block {<br /><br />@include inline-block;<br /><br />}<br /><br /></blockquote><br />编译后生成<br /><br /><blockquote><br />#inline-block {<br /><br />display: -moz-inline-stack;<br /><br />display: inline-block;<br /><br />vertical-align: middle;<br /><br />*vertical-align: auto;<br /><br />zoom: 1;<br /><br />*display: inline;<br /><br />}<br /><br /></blockquote><br /><b>八、layout模块</b><br /><br /><a href="http://compass-style.org/reference/compass/layout/">该模块</a>提供布局功能。<br /><br />比如，指定页面的<a href="http://compass-style.org/reference/compass/layout/sticky_footer/">footer</a>部分总是出现在浏览器最底端：<br /><br /><blockquote><br />@import "compass/layout";<br /><br />#footer {<br /><br />@include sticky-footer(54px);<br /><br />}<br /><br /></blockquote><br />又比如，指定子元素<a href="http://compass-style.org/reference/compass/layout/stretching/">占满</a>父元素的空间：<br /><br /><blockquote><br />@import "compass/layout";<br /><br />#stretch-full {<br /><br />@include stretch; <br /><br />}<br /><br /></blockquote><br /><b>九、typography模块</b><br /><br /><a href="http://compass-style.org/reference/compass/typography/">该模块</a>提供版式功能。<br /><br />比如，指定<a href="http://compass-style.org/reference/compass/typography/links/link_colors/">链接颜色</a>的mixin为：<br /><br /><blockquote><br />link-colors($normal, $hover, $active, $visited, $focus);<br /><br /></blockquote><br />使用时写成：<br /><br /><blockquote><br />@import "compass/typography";<br /><br />a {<br /><br />@include link-colors(#00c, #0cc, #c0c, #ccc, #cc0);<br /><br />}<br /><br /></blockquote><br /><b>十、utilities模块</b><br /><br /><a href="http://compass-style.org/reference/compass/utilities/">该模块</a>提供某些不属于其他模块的功能。<br /><br />比如，<a href="http://compass-style.org/reference/compass/utilities/general/clearfix/">清除浮动</a>：<br /><br /><blockquote><br />import "compass/utilities/";<br /><br />.clearfix {<br /><br />@include clearfix;<br /><br />}<br /><br /></blockquote><br />再比如，<a href="http://compass-style.org/reference/compass/utilities/tables/">表格</a>：<br /><br /><blockquote><br />@import "compass/utilities";<br /><br />table {<br /><br />@include table-scaffolding;<br /><br />}<br /><br /></blockquote><br />编译后生成<br /><br /><blockquote><br />table th {<br /><br />text-align: center;<br /><br />font-weight: bold;<br /><br />}<br /><br />table td,<br /><br />table th {<br /><br />padding: 2px;<br /><br />}<br /><br />table td.numeric,<br /><br />table th.numeric {<br /><br />text-align: right;<br /><br />}<br /><br /></blockquote><br /><b>十一、Helper函数</b><br /><br />除了模块，Compass还提供一系列<a href="http://compass-style.org/reference/compass/helpers/">函数</a>。<br /><br />有些函数非常有用，比如<a href="http://compass-style.org/reference/compass/helpers/image-dimensions/#image-width">image-width()</a>和<a href="http://compass-style.org/reference/compass/helpers/image-dimensions/#image-height">image-height()</a>返回图片的宽和高。<br /><br />再比如，<a href="http://compass-style.org/reference/compass/helpers/inline-data/">inline-image()</a>可以将图片转为data协议的数据。<br /><br /><blockquote><br />@import "compass";<br /><br />.icon { background-image: inline-image("icon.png");}<br /><br /></blockquote><br /><br /><br />编译后得到<br /><br /><blockquote><br />.icon { background-image: url('data:image/png;base64,iBROR...QmCC');}<br /><br /></blockquote><br />函数与mixin的主要区别是，不需要使用@include命令，可以直接调用。<br /><br />（完）<br /><div style="background-color: #aad2f0; border-radius: 10px; border: 1px solid #d3d3d3; color: #556677; line-height: 160%; margin: 1em; padding: 0.3em 0.5em;"><h3>文档信息</h3><ul><li>版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></li><li>原文网址：<a href="http://www.ruanyifeng.com/blog/2012/11/compass.html">http://www.ruanyifeng.com/blog/2012/11/compass.html</a></li><li>最后修改时间：2012年12月 3日 17:47</li><li>付费支持：<a href="https://me.alipay.com/ruanyf"><img alt="人民币 - 支付宝" src="http://www.ruanyifeng.com/blog/images/rmb_32.png" style="border: none; vertical-align: middle;" title="人民币" /></a> | <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=yifeng.ruan@gmail.com&amp;currency_code=USD&amp;amount=0.99&amp;return=http://www.ruanyifeng.com/thank.html&amp;item_name=Ruan%20YiFeng%27s%20Blog&amp;undefined_quantity=1&amp;no_note=0"><img alt="美元 - paypal" src="http://www.ruanyifeng.com/blog/images/dollar_32.png" style="border: none; vertical-align: middle;" title="美元" /></a> </li></ul></div><div style="border-radius: 10px; color: #556677; line-height: 160%; margin: 1em; padding: 0.3em 0.5em;"></div>