---
layout: post
title: "简单算术题式验证码的实现"
date: '2013-07-23T15:47:00.001+08:00'
author: Wenh Q
tags: 
modified_time: '2013-07-23T15:47:15.562+08:00'
thumbnail: https://lh4.googleusercontent.com/J-PQ43oWUdmD98BzBNj6wZz_lYAPIQ8XnM9t7MrPLfngg98Vx4SZrfdpIc-iC47cQiMbrhF3L5YyAl1b34hQpcNzZyb4xORxKPgNGb3IXRp-Kc3mH3M=s72-c
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-8818824016712550347
blogger_orig_url: http://binaryware.blogspot.com/2013/07/blog-post_847.html
---

<div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="color: #0000ee; font-family: &quot;Verdana&quot;; text-decoration: underline;"><a href="http://blog.csdn.net/sadfishsc/article/details/7545972" style="color: inherit; text-decoration: inherit;"><br />简单算术题式验证码的实现</a></span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding-bottom: 8pt; padding-left: 0; padding-right: 0; padding-top: 0;"><span style="font-family: &quot;Verdana&quot;;">于 12-5-8 通过 </span><span style="color: #0000ee; font-family: &quot;Verdana&quot;; text-decoration: underline;"><a href="http://blog.csdn.net/" style="color: inherit; text-decoration: inherit;">CSDN博客推荐文章</a></span><span style="font-family: &quot;Verdana&quot;;">&nbsp;作者：sadfishsc</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; height: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;"></span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">今天心血来潮搜索了下验证码的实现方式，仿照网上一个6位字符型的验证码实现了一个100以内算术题式的验证码。代码如下，备用：</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; height: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;"></span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Courier New&quot;;">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "</span><span style="color: #0000ee; font-family: &quot;Courier New&quot;; text-decoration: underline;"><a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" style="color: inherit; text-decoration: inherit;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a></span><span style="font-family: &quot;Courier New&quot;;">"&gt;<br />&lt;html xmlns="</span><span style="color: #0000ee; font-family: &quot;Courier New&quot;; text-decoration: underline;"><a href="http://www.w3.org/1999/xhtml" style="color: inherit; text-decoration: inherit;">http://www.w3.org/1999/xhtml</a></span><span style="font-family: &quot;Courier New&quot;;">"&gt;<br />&lt;head&gt;<br />&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;<br />&lt;title&gt;验证码&lt;/title&gt;<br />&lt;style type="text/css"&gt;<br />.nocode {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100px;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height: 25px;<br />}<br /><br />.code {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background: url(code_bg.jpg) repeat;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color: #ff0000;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family: Tahoma, Geneva, sans-serif;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-style: italic;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-weight: bold;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: center;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100px;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height: 25px;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor: pointer;<br />}<br /><br />.input {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100px;<br />}<br />&lt;/style&gt;<br />&lt;script type="text/javascript" src="jquery.js"&gt;&lt;/script&gt;<br />&lt;script type="text/javascript"&gt;<br />$(function() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var code = 9999;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(".input").focus(function(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(this).attr("value", "");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var num1 = Math.floor(Math.random() * 100);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var num2 = Math.floor(Math.random() * 100);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code = num1 + num2;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#code").html(num1 + "+" + num2 + "=?");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($("#code").hasClass("nocode")) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#code").removeClass("nocode");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#code").addClass("code");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#check").click(function(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($(".input").attr("value") == code &amp;&amp; code != 9999) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("Pass!");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("Wrong code!");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br />});<br />&lt;/script&gt;<br />&lt;/head&gt;<br /><br />&lt;body&gt;<br />&lt;input type="text" class="input" /&gt;<br />&lt;div id="code" class="nocode"&gt;&lt;/div&gt;<br />&lt;button id="check"&gt;验证&lt;/button&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">效果如下：</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; height: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;"></span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><img height="98" src="https://lh4.googleusercontent.com/J-PQ43oWUdmD98BzBNj6wZz_lYAPIQ8XnM9t7MrPLfngg98Vx4SZrfdpIc-iC47cQiMbrhF3L5YyAl1b34hQpcNzZyb4xORxKPgNGb3IXRp-Kc3mH3M" width="125" /></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">上述实现主要还是基于jQuery，其实也可以不用。JavaScript 1.6新添加了一系列函数，其中就包含</span><span style="font-family: &quot;Verdana&quot;; font-weight: bold;">document.querySelector</span><span style="font-family: &quot;Verdana&quot;;">和</span><span style="font-family: &quot;Verdana&quot;; font-weight: bold;">document.querySelectorAll</span><span style="font-family: &quot;Verdana&quot;;">。这两个函数的作用与jQuery的元素选择器如出一辙，即通过传入类似于 ".class" 、 "#id" 等这样的字符串选择符来获取元素；区别在于&nbsp;querySelector 函数获取的是符合选择符的第一个DOM元素，而 querySelectorAll 函数获取的是符合选择符的DOM元素数组。获取到元素之后，就可以通过相应的事件（如onfocus、onclick等）来操作数据了。</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">另外，验证码的元素除了用&lt;div&gt;以外，还可能使用&lt;input type="text"&gt;，只不过需要对其做一定的处理：如去掉输入框的边框（border: none），设置为只读（readonly）。</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">最后附上验证码的背景图片 code_bg.jpg ：</span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><img height="20" src="https://lh3.googleusercontent.com/YuSNmQ4E8eG7TmInR2PPIVOi91aw51gmO6iS3CeCbgSSQGD9MoRHzgDRS7SbxZhzSQY8IYbEUMloDLrIUQI5biRLYD0i4KD2hAGMdTMX4PdunxyxFyw" width="2" /></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">作者：sadfishsc 发表于2012-5-8 14:08:34 </span><span style="color: #0000ee; font-family: &quot;Verdana&quot;; text-decoration: underline;"><a href="http://blog.csdn.net/sadfishsc/article/details/7545972" style="color: inherit; text-decoration: inherit;">原文链接</a></span></div><div style="color: black; direction: ltr; font-family: &quot;Arial&quot;; font-size: 11pt; margin-bottom: 0; margin-left: 7.5pt; margin-right: 7.5pt; margin-top: 0; padding: 0;"><span style="font-family: &quot;Verdana&quot;;">阅读：23 评论：0 </span><span style="color: #0000ee; font-family: &quot;Verdana&quot;; text-decoration: underline;"><a href="http://blog.csdn.net/sadfishsc/article/details/7545972#comments" style="color: inherit; text-decoration: inherit;">查看评论</a></span></div>