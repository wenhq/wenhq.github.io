---
layout: post
title: TF-IDF与余弦相似性的应用（二）：找出相似文章
date: '2013-03-24T11:59:00.001+08:00'
author: Wenh Q
tags: 
modified_time: '2013-03-24T11:59:16.778+08:00'
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-574178411658535071
blogger_orig_url: http://binaryware.blogspot.com/2013/03/tf-idf_23.html
---

<a href="http://www.ruanyifeng.com/blog/2013/03/cosine_similarity.html">TF-IDF与余弦相似性的应用（二）：找出相似文章</a>: <br />上一次，我用<a href="http://www.ruanyifeng.com/blog/2013/03/tf-idf.html">TF-IDF算法</a>自动提取关键词。<br />今天，我们再来研究另一个相关的问题。有些时候，除了找到关键词，我们还希望找到与原文章相似的其他文章。比如，"Google新闻"在主新闻下方，还提供多条相似的新闻。<br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032001.png" /><br /><br />为了找出相似的文章，需要用到<a href="http://en.wikipedia.org/wiki/Cosine_similarity">"余弦相似性"</a>（cosine similiarity）。下面，我举一个例子来说明，什么是"余弦相似性"。<br /><br />为了简单起见，我们先从句子着手。<br /><br /><blockquote><br />句子A：我喜欢看电视，不喜欢看电影。<br /><br />句子B：我不喜欢看电视，也不喜欢看电影。<br /><br /></blockquote><br />请问怎样才能计算上面两句话的相似程度？<br /><br />基本思路是：如果这两句话的用词越相似，它们的内容就应该越相似。因此，可以从词频入手，计算它们的相似程度。<br /><br /><b>第一步，分词。</b><br /><br /><blockquote><br />句子A：我/喜欢/看/电视，不/喜欢/看/电影。<br /><br />句子B：我/不/喜欢/看/电视，也/不/喜欢/看/电影。<br /><br /></blockquote><br /><b>第二步，列出所有的词。</b><br /><br /><blockquote><br />我，喜欢，看，电视，电影，不，也。<br /><br /></blockquote><br /><b>第三步，计算词频。</b><br /><br /><blockquote><br />句子A：我 1，喜欢 2，看 2，电视 1，电影 1，不 1，也 0。<br /><br />句子B：我 1，喜欢 2，看 2，电视 1，电影 1，不 2，也 1。<br /><br /></blockquote><br /><b>第四步，写出词频向量。</b><br /><br /><blockquote><br />句子A：[1, 2, 2, 1, 1, 1, 0]<br /><br />句子B：[1, 2, 2, 1, 1, 2, 1]<br /><br /></blockquote><br />到这里，问题就变成了如何计算这两个向量的相似程度。<br /><br />我们可以把它们想象成空间中的两条线段，都是从原点（[0, 0, ...]）出发，指向不同的方向。两条线段之间形成一个夹角，如果夹角为0度，意味着方向相同、线段重合；如果夹角为90度，意味着形成直角，方向完全不相似；如果夹角为180度，意味着方向正好相反。<b>因此，我们可以通过夹角的大小，来判断向量的相似程度。夹角越小，就代表越相似。</b><br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032002.png" /><br /><br />以二维空间为例，上图的a和b是两个向量，我们要计算它们的夹角θ。<a href="http://zh.wikipedia.org/zh-cn/%E9%A4%98%E5%BC%A6%E5%AE%9A%E7%90%86">余弦定理</a>告诉我们，可以用下面的公式求得：<br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032004.png" /><br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032003.png" /><br /><br />假定a向量是[x1, y1]，b向量是[x2, y2]，那么可以将余弦定理改写成下面的形式：<br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032006.png" /><br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032005.png" /><br /><br />数学家已经证明，余弦的这种计算方法对n维向量也成立。假定A和B是两个n维向量，A是 [A1, A2, ..., An] ，B是 [B1, B2, ..., Bn] ，则A与B的夹角θ的余弦等于：<br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032007.png" /><br /><br />使用这个公式，我们就可以得到，句子A与句子B的夹角的余弦。<br /><br /><img src="http://image.beekka.com/blog/201303/bg2013032008.png" /><br /><br /><b>余弦值越接近1，就表明夹角越接近0度，也就是两个向量越相似，这就叫"余弦相似性"。</b>所以，上面的句子A和句子B是很相似的，事实上它们的夹角大约为20.3度。<br /><br />由此，我们就得到了"找出相似文章"的一种算法：<br /><br /><blockquote><br />（1）使用TF-IDF算法，找出两篇文章的关键词；<br /><br />（2）每篇文章各取出若干个关键词（比如20个），合并成一个集合，计算每篇文章对于这个集合中的词的词频（为了避免文章长度的差异，可以使用相对词频）；<br /><br />（3）生成两篇文章各自的词频向量；<br /><br />（4）计算两个向量的余弦相似度，值越大就表示越相似。<br /><br /></blockquote><br />"余弦相似度"是一种非常有用的算法，只要是计算两个向量的相似程度，都可以采用它。<br /><br />下一次，我想谈谈如何在词频统计的基础上，自动生成一篇文章的摘要。<br /><br />（完）<br /><br /><br /><div style="background-color: #aad2f0; border-radius: 10px; border: 1px solid #d3d3d3; color: #556677; line-height: 160%; margin: 1em; padding: 0.3em 0.5em;"><h3>文档信息</h3><ul><li>版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></li><li>原文网址：<a href="http://www.ruanyifeng.com/blog/2013/03/cosine_similarity.html">http://www.ruanyifeng.com/blog/2013/03/cosine_similarity.html</a></li><li>最后修改时间：2013年3月24日 08:53</li><li>付费支持：<a href="https://me.alipay.com/ruanyf"><img alt="人民币 - 支付宝" src="http://www.ruanyifeng.com/blog/images/rmb_32.png" style="border: none; vertical-align: middle;" title="人民币" /></a> | <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=yifeng.ruan@gmail.com&amp;currency_code=USD&amp;amount=0.99&amp;return=http://www.ruanyifeng.com/thank.html&amp;item_name=Ruan%20YiFeng%27s%20Blog&amp;undefined_quantity=1&amp;no_note=0"><img alt="美元 - paypal" src="http://www.ruanyifeng.com/blog/images/dollar_32.png" style="border: none; vertical-align: middle;" title="美元" /></a> </li></ul></div><div style="border-radius: 10px; color: #556677; line-height: 160%; margin: 1em; padding: 0.3em 0.5em;"><b>[广告]</b>　<a href="http://ushan.cn/?utm_source=ruanyifeng.com" style="border: none;">优衫（Ushan）是国内顶尖的定制西服店，常年为众多政商名流、影视明星、跨国高管定制衬衫与西服。以工艺精良、用料考究、版型出色、性价比高等特点广受各界好评。</a><br /></div>