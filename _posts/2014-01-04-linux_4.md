--- layout: post title: "详细介绍Linux批量用户的创建" date:
'2014-01-04T12:31:00.003+08:00' author: Wenh Q tags: modified\_time:
'2014-01-04T12:31:38.868+08:00' blogger\_id:
tag:blogger.com,1999:blog-4961947611491238191.post-8906435845794967481
blogger\_orig\_url: http://binaryware.blogspot.com/2014/01/linux\_4.html
---
　　Linux管理员创建和删除用户是相对简单的事情，但是如果要进行Linux批量用户的创建相信刚学Linux系统管理的人还是感到比较棘手的，Linux系统充分考虑到了这个问题，下面就来说明解决Linux批量用户创建的问题。\
\
\
　　Linux系统提供了创建大量用户的工具，可以让您立即创建大量用户，方法如下：\
\
　　(1)先编辑一个文本用户文件，每一列按照/etc/passwd密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：\
\
　　user001::600:100:user:/home/user001:/bin/bash\
\
　　user002::601:100:user:/home/user002:/bin/bash\
\
　　user003::602:100:user:/home/user003:/bin/bash\
\
　　user004::603:100:user:/home/user004:/bin/bash\
\
　　user005::604:100:user:/home/user005:/bin/bash\
\
　　user006::605:100:user:/home/user006:/bin/bash\
\
　　(2)以root身份执行命令/usr/sbin/newusers，从刚创建的用户文件user.txt中导入数据，创建用户：\
\
　　\# newusers \< user.txt\
\
　　然后可以执行命令vipw或vi
/etc/passwd检查/etc/passwd文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。\
\
　　3)执行命令/usr/sbin/pwunconv，将/etc/shadow产生的shadow密码解码，然后回写到/etc/passwd
中，并将/etc/shadow的shadow密码栏删掉。这是为了方便下一步的密码转换工作，即先取消shadow
password功能。\
\
　　\# pwunconv\
\
　　(4)编辑每个用户的密码对照文件，范例文件passwd.txt内容如下：\
\
　　user001:密码\
\
　　user002:密码\
\
　　user003:密码\
\
　　user004:密码\
\
　　user005:密码\
\
　　user006:密码\
\
　　(5)以root身份执行命令/usr/sbin/chpasswd，创建用户密码，chpasswd会将经过/usr/bin/passwd命令编码过的密码写入/etc/passwd的密码栏。\
\
　　\# chpasswd \< passwd.txt\
\
　　(6)确定密码经编码写入/etc/passwd的密码栏后，执行命令/usr/sbin/pwconv将密码编码为shadow
password，并将结果写入/etc/shadow。\
\
　　\# pwconv\
\
　　这样就完成了Linux批量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。
