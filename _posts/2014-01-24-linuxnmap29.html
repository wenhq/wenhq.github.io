---
layout: post
title: "给Linux系统/网络管理员准备的Nmap命令的29个实用范例"
date: '2014-01-24T15:28:00.005+08:00'
author: Wenh Q
tags: 
modified_time: '2014-01-24T15:28:57.420+08:00'
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-6221332183410220000
blogger_orig_url: http://binaryware.blogspot.com/2014/01/linuxnmap29.html
---

<a href="http://blog.jobbole.com/54595/">给Linux系统/网络管理员准备的Nmap命令的29个实用范例</a>  通过 <a href="http://blog.jobbole.com/">博客 - 伯乐在线</a><br /><br /><b>Nmap</b>即<b>网络映射器</b>对Linux系统/网络管理员来说是一个开源且非常通用的工具。Nmap用于在远程机器上<b>探测网络，执行安全扫描，网络审计和搜寻开放端口</b>。它会扫描远程在线主机，该主机的操作系统，包过滤器和开放的端口。<br /><br /><img src="https://images-blogger-opensocial.googleusercontent.com/gadgets/proxy?url=http%3A%2F%2Fwww.tecmint.com%2Fwp-content%2Fuploads%2F2013%2F12%2FNmap-Commands.png&amp;container=blogger&amp;gadget=a&amp;rewriteMime=image%2F*" /><a href="http://www.tecmint.com/wp-content/uploads/2013/12/Nmap-Commands.png"><br /></a><br /><br />我将用两个不同的部分来涵盖大部分NMAP的使用方法，这是nmap关键的第一部分。在下面的设置中，我使用两台已关闭防火墙的服务器来测试Nmap命令的工作情况。<br /><blockquote class="tr_bq">192.168.0.100 – server1.tecmint.com<br />192.168.0.101 – server2.tecmint.com</blockquote><h2>NMAP命令用法</h2><div><blockquote class="tr_bq"># nmap [Scan Type(s)] [Options] {target specification}</blockquote><h2>如何在Linux下安装NMAP</h2>现在大部分Linux的发行版本像Red Hat，CentOS，Fedoro，Debian和Ubuntu在其默认的软件包管理库（即<a href="http://www.tecmint.com/20-linux-yum-yellowdog-updater-modified-commands-for-package-mangement/">Yum</a> 和 <a href="http://www.tecmint.com/useful-basic-commands-of-apt-get-and-apt-cache-for-package-management/">APT</a>）中都自带了Nmap，这两种工具都用于安装和管理软件包和更新。在发行版上安装Nmap具体使用如下命令。</div><blockquote class="tr_bq"># yum install nmap [on Red Hat based systems]<br />$ sudo apt-get install nmap [on Debian based systems]</blockquote><div>一旦你安装了最新的nmap应用程序，你就可以按照本文中提供的示例说明来操作。<br /><h2>1. 用主机名和IP地址扫描系统</h2>Nmap工具提供各种方法来扫描系统。在这个例子中，我使用server2.tecmint.com主机名来扫描系统找出该系统上所有开放的端口，服务和MAC地址。<br />使用主机名扫描</div><blockquote class="tr_bq">[root@server1 ~]# nmap server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 15:42 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.415 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div>使用IP地址扫描</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-18 11:04 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />958/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.465 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div><h2>2.扫描使用"-v"选项</h2>你可以看到下面的命令使用" -v "选项后给出了远程机器更详细的信息。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -v server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 15:43 EST<br />Initiating ARP Ping Scan against 192.168.0.101 [1 port] at 15:43<br />The ARP Ping Scan took 0.01s to scan 1 total hosts.<br />Initiating SYN Stealth Scan against server2.tecmint.com (192.168.0.101) [1680 ports] at 15:43<br />Discovered open port 22/tcp on 192.168.0.101<br />Discovered open port 80/tcp on 192.168.0.101<br />Discovered open port 8888/tcp on 192.168.0.101<br />Discovered open port 111/tcp on 192.168.0.101<br />Discovered open port 3306/tcp on 192.168.0.101<br />Discovered open port 957/tcp on 192.168.0.101<br />The SYN Stealth Scan took 0.30s to scan 1680 total ports.<br />Host server2.tecmint.com (192.168.0.101) appears to be up ... good.<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.485 seconds<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Raw packets sent: 1681 (73.962KB) | Rcvd: 1681 (77.322KB)</blockquote><div><h2>3.扫描多台主机</h2>你可以简单的在Nmap命令后加上多个IP地址或主机名来扫描多台主机。</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.101 192.168.0.102 192.168.0.103<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:06 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 3 IP addresses (1 host up) scanned in 0.580 seconds</blockquote><div><h2>4.扫描整个子网</h2>你可以使用*通配符来扫描整个子网或某个范围的IP地址。</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.*<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:11 EST<br />Interesting ports on server1.tecmint.com (192.168.0.100):<br />Not shown: 1677 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />111/tcp open rpcbind<br />851/tcp open unknown<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 256 IP addresses (2 hosts up) scanned in 5.550 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div>从上面的输出可以看到，nmap扫描了整个子网，给出了网络中当前网络中在线主机的信息。<br /><h2>5.使用IP地址的最后一个字节扫描多台服务器</h2>你可以简单的指定IP地址的最后一个字节来对多个IP地址进行扫描。例如，我在下面执行中扫描了IP地址192.168.0.101，192.168.0.102和192.168.0.103。</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.101,102,103<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:09 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 3 IP addresses (1 host up) scanned in 0.552 seconds<br />You have new mail in /var/spool/mail/root</blockquote><h2>6. 从一个文件中扫描主机列表</h2><div>如果你有多台主机需要扫描且所有主机信息都写在一个文件中，那么你可以直接让nmap读取该文件来执行扫描，让我们来看看如何做到这一点。<br /><br />创建一个名为"nmaptest.txt "的文本文件，并定义所有你想要扫描的服务器IP地址或主机名。</div><blockquote class="tr_bq">[root@server1 ~]# cat &gt; nmaptest.txt<br />localhost<br />server2.tecmint.com<br />192.168.0.101</blockquote><div>接下来运行带"iL" 选项的nmap命令来扫描文件中列出的所有IP地址。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -iL nmaptest.txt<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-18 10:58 EST<br />Interesting ports on localhost.localdomain (127.0.0.1):<br />Not shown: 1675 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />25/tcp open smtp<br />111/tcp open rpcbind<br />631/tcp open ipp<br />857/tcp open unknown<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />958/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />958/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 3 IP addresses (3 hosts up) scanned in 2.047 seconds</blockquote><div><h2>7.扫描一个IP地址范围</h2>你可以在nmap执行扫描时指定IP范围。</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.101-110<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:09 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 10 IP addresses (1 host up) scanned in 0.542 seconds</blockquote><div><h2>8.排除一些远程主机后再扫描</h2>在执行全网扫描或用通配符扫描时你可以使用"-exclude"选项来排除某些你不想要扫描的主机。</div><blockquote class="tr_bq">[root@server1 ~]# nmap 192.168.0.* --exclude 192.168.0.100<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:16 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 255 IP addresses (1 host up) scanned in 5.313 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div><h2>9.扫描操作系统信息和路由跟踪</h2>使用Nmap，你可以检测远程主机上运行的操作系统和版本。为了启用操作系统和版本检测，脚本扫描和路由跟踪功能，我们可以使用NMAP的"-A"选项。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -A 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:25 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE VERSION<br />22/tcp open ssh OpenSSH 4.3 (protocol 2.0)<br />80/tcp open http Apache httpd 2.2.3 ((CentOS))<br />111/tcp open rpcbind 2 (rpc #100000)<br />957/tcp open status 1 (rpc #100024)<br />3306/tcp open mysql MySQL (unauthorized)<br />8888/tcp open http lighttpd 1.4.32<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />No exact OS matches for host (If you know what OS is running on it, see http://www.insecure.org/cgi-bin/nmap-submit.cgi). TCP/IP fingerprint:<br />SInfo(V=4.11%P=i686-redhat-linux-gnu%D=11/11%Tm=52814B66%O=22%C=1%M=080027)<br />TSeq(Class=TR%IPID=Z%TS=1000HZ)<br />T1(Resp=Y%DF=Y%W=16A0%ACK=S++%Flags=AS%Ops=MNNTNW)<br />T2(Resp=N)<br />T3(Resp=Y%DF=Y%W=16A0%ACK=S++%Flags=AS%Ops=MNNTNW)<br />T4(Resp=Y%DF=Y%W=0%ACK=O%Flags=R%Ops=)<br />T5(Resp=Y%DF=Y%W=0%ACK=S++%Flags=AR%Ops=)<br />T6(Resp=Y%DF=Y%W=0%ACK=O%Flags=R%Ops=)<br />T7(Resp=Y%DF=Y%W=0%ACK=S++%Flags=AR%Ops=)<br />PU(Resp=Y%DF=N%TOS=C0%IPLEN=164%RIPTL=148%RID=E%RIPCK=E%UCK=E%ULEN=134%DAT=E)<br />Uptime 0.169 days (since Mon Nov 11 12:22:15 2013)<br />Nmap finished: 1 IP address (1 host up) scanned in 22.271 seconds</blockquote><div>从上面的输出你可以看到，Nmap显示出了远程主机操作系统的TCP / IP协议指纹，并且更加具体的显示出远程主机上的端口和服务。<br /><h2>10.启用Nmap的操作系统探测功能</h2>使用选项"-O"和"-osscan-guess"也帮助探测操作系统信息。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -O server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:40 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />No exact OS matches for host (If you know what OS is running on it, see http://www.insecure.org/cgi-bin/nmap-submit.cgi). TCP/IP fingerprint:<br />SInfo(V=4.11%P=i686-redhat-linux-gnu%D=11/11%Tm=52815CF4%O=22%C=1%M=080027)<br />TSeq(Class=TR%IPID=Z%TS=1000HZ)<br />T1(Resp=Y%DF=Y%W=16A0%ACK=S++%Flags=AS%Ops=MNNTNW)<br />T2(Resp=N)<br />T3(Resp=Y%DF=Y%W=16A0%ACK=S++%Flags=AS%Ops=MNNTNW)<br />T4(Resp=Y%DF=Y%W=0%ACK=O%Flags=Option -O and -osscan-guess also helps to discover OS R%Ops=)<br />T5(Resp=Y%DF=Y%W=0%ACK=S++%Flags=AR%Ops=)<br />T6(Resp=Y%DF=Y%W=0%ACK=O%Flags=R%Ops=)<br />T7(Resp=Y%DF=Y%W=0%ACK=S++%Flags=AR%Ops=)<br />PU(Resp=Y%DF=N%TOS=C0%IPLEN=164%RIPTL=148%RID=E%RIPCK=E%UCK=E%ULEN=134%DAT=E)<br />Uptime 0.221 days (since Mon Nov 11 12:22:16 2013)<br />Nmap finished: 1 IP address (1 host up) scanned in 11.064 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div><h2>11.扫描主机侦测防火墙</h2>下面的命令将扫描远程主机以探测该主机是否使用了包过滤器或防火墙。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -sA 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:27 EST<br />All 1680 scanned ports on server2.tecmint.com (192.168.0.101) are UNfiltered MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.382 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div><h2>12.扫描主机检测是否有防火墙保护</h2>扫描主机检测其是否受到数据包过滤软件或防火墙的保护。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -PN 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:30 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.399 seconds</blockquote><div><h2>13.找出网络中的在线主机</h2>使用"-sP"选项，我们可以简单的检测网络中有哪些在线主机，该选项会跳过端口扫描和其他一些检测。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -sP 192.168.0.*<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-18 11:01 EST<br />Host server1.tecmint.com (192.168.0.100) appears to be up.<br />Host server2.tecmint.com (192.168.0.101) appears to be up.<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 256 IP addresses (2 hosts up) scanned in 5.109 seconds</blockquote><div><h2>14.执行快速扫描</h2>你可以使用"-F"选项执行一次快速扫描，仅扫描列在nmap-services文件中的端口而避开所有其它的端口。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -F 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:47 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1234 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.322 seconds</blockquote><div><h2>15.查看Nmap的版本</h2>你可以使用"-V"选项来检测你机子上Nmap的版本。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -V<br />Nmap version 4.11 ( http://www.insecure.org/nmap/ )<br />You have new mail in /var/spool/mail/root</blockquote><div><h2>16.顺序扫描端口</h2>使用"-r"选项表示不会随机的选择端口扫描。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -r 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 16:52 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.363 seconds</blockquote><div><h2>17.打印主机接口和路由</h2>你可以使用nmap的"–iflist"选项检测主机接口和路由信息。</div><blockquote class="tr_bq">[root@server1 ~]# nmap --iflist<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:07 EST<br />************************INTERFACES************************<br />DEV (SHORT) IP/MASK TYPE UP MAC<br />lo (lo) 127.0.0.1/8 loopback up<br />eth0 (eth0) 192.168.0.100/24 ethernet up 08:00:27:11:C7:89 **************************ROUTES**************************<br />DST/MASK DEV GATEWAY<br />192.168.0.0/0 eth0<br />169.254.0.0/0 eth0</blockquote><div>从上面的输出你可以看到，nmap列举出了你系统上的接口以及它们各自的路由信息。<br /><h2>18.扫描特定的端口</h2>使用Nmap扫描远程机器的端口有各种选项，你可以使用"-P"选项指定你想要扫描的端口，默认情况下nmap只扫描TCP端口。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -p 80 server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:12 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />80/tcp open http<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) sca</blockquote><div><h2>19.扫描TCP端口</h2>你可以指定具体的端口类型和端口号来让nmap扫描。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -p T:8888,80 server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:15 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />80/tcp open http<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.157 seconds</blockquote><h2>20.扫描UDP端口</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -sU 53 server2.tecmint.com<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:15 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />53/udp open http<br />8888/udp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.157 seconds</blockquote><div><h2>21.扫描多个端口</h2>你还可以使用选项"-P"来扫描多个端口。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -p 80,443 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-18 10:56 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />80/tcp open http<br />443/tcp closed https<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.190 seconds</blockquote><div><h2>22.扫描指定范围内的端口</h2>您可以使用表达式来扫描某个范围内的端口。</div><div><blockquote class="tr_bq">[root@server1 ~]# nmap -p 80-160 192.168.0.101</blockquote><h2>23.查找主机服务版本号</h2>我们可以使用"-sV"选项找出远程主机上运行的服务版本。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -sV 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:48 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE VERSION<br />22/tcp open ssh OpenSSH 4.3 (protocol 2.0)<br />80/tcp open http Apache httpd 2.2.3 ((CentOS))<br />111/tcp open rpcbind 2 (rpc #100000)<br />957/tcp open status 1 (rpc #100024)<br />3306/tcp open mysql MySQL (unauthorized)<br />8888/tcp open http lighttpd 1.4.32<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 12.624 seconds</blockquote><div><h2>24.使用TCP ACK (PA)和TCP Syn (PS)扫描远程主机</h2>有时候包过滤防火墙会阻断标准的ICMP ping请求，在这种情况下，我们可以使用TCP ACK和TCP Syn方法来扫描远程主机。</div><blockquote class="tr_bq">[root@server1 ~]# nmap -PS 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 17:51 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.360 seconds<br />You have new mail in /var/spool/mail/root</blockquote><h2>25.使用TCP ACK扫描远程主机上特定的端口</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -PA -p 22,80 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 18:02 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.166 seconds<br />You have new mail in /var/spool/mail/root</blockquote><h2>26. 使用TCP Syn扫描远程主机上特定的端口</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -PS -p 22,80 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 18:08 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.165 seconds<br />You have new mail in /var/spool/mail/root</blockquote><h2>27.执行一次隐蔽的扫描</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -sS 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 18:10 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 0.383 seconds<br />You have new mail in /var/spool/mail/root</blockquote><h2>28.使用TCP Syn扫描最常用的端口</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -sT 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 18:12 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />111/tcp open rpcbind<br />957/tcp open unknown<br />3306/tcp open mysql<br />8888/tcp open sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems) Nmap finished: 1 IP address (1 host up) scanned in 0.406 seconds You have new mail in /var/spool/mail/root</blockquote><h2>29.执行TCP空扫描以骗过防火墙</h2><blockquote class="tr_bq">[root@server1 ~]# nmap -sN 192.168.0.101<br />Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2013-11-11 19:01 EST<br />Interesting ports on server2.tecmint.com (192.168.0.101):<br />Not shown: 1674 closed ports<br />PORT STATE SERVICE<br />22/tcp open|filtered ssh<br />80/tcp open|filtered http<br />111/tcp open|filtered rpcbind<br />957/tcp open|filtered unknown<br />3306/tcp open|filtered mysql<br />8888/tcp open|filtered sun-answerbook<br />MAC Address: 08:00:27:D9:8E:D7 (Cadmus Computer Systems)<br />Nmap finished: 1 IP address (1 host up) scanned in 1.584 seconds<br />You have new mail in /var/spool/mail/root</blockquote><div>以上就是NMAP的基本使用，我会在第二部分带来NMAP更多的创意选项。至此，敬请关注我们，不要忘记分享您的宝贵意见。<br /><br /><a href="http://blog.jobbole.com/54595/">给Linux系统/网络管理员准备的Nmap命令的29个实用范例</a>，首发于<a href="http://blog.jobbole.com/">博客 - 伯乐在线</a>。</div>