---
layout: post
title: Hadoop Pseudo-Distributed
date: '2012-07-27T16:40:00.004+08:00'
author: Wenh Q
tags:
- tech
modified_time: '2013-10-11T13:36:02.869+08:00'
blogger_id: tag:blogger.com,1999:blog-4961947611491238191.post-1317080166277636848
blogger_orig_url: http://binaryware.blogspot.com/2012/07/hadoop-pseudo-distributed_27.html
---

<h2>Content</h2><h3>Configuration</h3>Use the following:<br /><br />conf/core-site.xml:<br /><blockquote class="tr_bq">&lt;configuration&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;fs.default.name&lt;/name&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<br />&lt;/configuration&gt;</blockquote>conf/hdfs-site.xml:<br /><blockquote class="tr_bq">&lt;configuration&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;dfs.replication&lt;/name&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;1&lt;/value&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<br />&lt;/configuration&gt;</blockquote>conf/mapred-site.xml:<br /><blockquote class="tr_bq">&lt;configuration&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;mapred.job.tracker&lt;/name&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;localhost:9001&lt;/value&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<br />&lt;/configuration&gt;</blockquote><h3>Setup passphraseless ssh</h3>Now check that you can ssh to the localhost without a passphrase:<br /><blockquote class="tr_bq">$ ssh localhost</blockquote><br />If you cannot ssh to localhost without a passphrase, execute the following commands:<br /><blockquote class="tr_bq">$ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa<br />$ cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys </blockquote><h3>Execution</h3>Format a new distributed-filesystem:<br /><br /><blockquote class="tr_bq">$ bin/hadoop namenode -format</blockquote>Start the hadoop daemons:<br /><br /><blockquote class="tr_bq">$ bin/start-all.sh</blockquote>The hadoop daemon log output is written to the ${HADOOP_LOG_DIR} directory (defaults to ${HADOOP_HOME}/logs).<br /><br />Browse the web interface for the NameNode and the JobTracker; by default they are available at:<br /><br /><blockquote class="tr_bq">NameNode - http://localhost:50070/</blockquote><blockquote>JobTracker - http://localhost:50030/</blockquote>Copy the input files into the distributed filesystem:<br /><br /><blockquote class="tr_bq">$ bin/hadoop fs -put conf input</blockquote>Run some of the examples provided:<br /><br /><blockquote class="tr_bq">$ bin/hadoop jar hadoop-examples-*.jar grep input output 'dfs[a-z.]+'</blockquote>Examine the output files:<br /><br />Copy the output files from the distributed filesystem to the local filesytem and examine them:<br /><br /><blockquote class="tr_bq">$ bin/hadoop fs -get output output<br />$ cat output/*</blockquote>or<br /><br />View the output files on the distributed filesystem:<br /><br /><blockquote class="tr_bq">$ bin/hadoop fs -cat output/*</blockquote>When you're done, stop the daemons with:<br /><br /><blockquote class="tr_bq">$ bin/stop-all.sh</blockquote><h3>Error <br /></h3>When I exe "bin/start-all.sh", there's an error "localhost:Error:JAVA_HOME is not set."<br /><br /><br /><blockquote class="tr_bq"># start-all.sh&nbsp;&nbsp; <br />This script is Deprecated. Instead use start-dfs.sh and start-mapred.sh&nbsp;&nbsp; <br />starting namenode, logging to /home/chenwq/hadoop/hadoop-0.21.0/bin/../logs/hadoop-root-namenode-ubuntu.out&nbsp;&nbsp; <br />localhost: Error: JAVA_HOME is not set.&nbsp;&nbsp; <br />localhost: Error: JAVA_HOME is not set.&nbsp;&nbsp; <br />starting jobtracker, logging to /home/chenwq/hadoop/hadoop-0.21.0/bin/../logs/hadoop-root-jobtracker-ubuntu.out&nbsp;&nbsp; <br />localhost: Error: JAVA_HOME is not set.&nbsp; <br /><br /></blockquote><br />Need to modify conf/hadoop-env.sh <br /><br /><h2>Ref</h2><a href="http://hadoop.apache.org/common/docs/stable/single_node_setup.html#PseudoDistributed" target="_blank">Pseudo-Distributed Operation</a><br /><a href="http://chenwq.iteye.com/blog/1161530" target="_blank">localhost: Error: JAVA_HOME is not set.</a><br /><h2>Log</h2>2012-07-27 Create